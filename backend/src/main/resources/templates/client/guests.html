<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Guests</title>
  <link rel="stylesheet" type="text/css" href="../../static/css/styles.css">
  <link rel="stylesheet" type="text/css" href="../../static/css/grid.css">
  <link rel="stylesheet" type="text/css" href="../../static/css/base.css">
  <link rel="stylesheet" type="text/css" href="../../static/css/nav.css">

</head>
<body class="guests">
  <nav id="sidebar">
    <ul>
      <li>
        <span class="logo">WedConnect</span>
        <button onclick=toggleSidebar() id="toggle-btn">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#FFFFFF"><path d="M440-240 200-480l240-240 56 56-183 184 183 184-56 56Zm264 0L464-480l240-240 56 56-183 184 183 184-56 56Z"/></svg>
        </button>
      </li>
      <li>
        <a th:href="@{/client/home}">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#FFFFFF"><path d="M240-200h120v-240h240v240h120v-360L480-740 240-560v360Zm-80 80v-480l320-240 320 240v480H520v-240h-80v240H160Zm320-350Z"/></svg>
          <span>Home</span>
        </a>
      </li>

      <li>
        <a th:href="@{/client/calendar}">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#FFFFFF"><path d="M200-80q-33 0-56.5-23.5T120-160v-560q0-33 23.5-56.5T200-800h40v-80h80v80h320v-80h80v80h40q33 0 56.5 23.5T840-720v560q0 33-23.5 56.5T760-80H200Zm0-80h560v-400H200v400Zm0-480h560v-80H200v80Zm0 0v-80 80Z"/></svg>
          <span>Calendar</span>
        </a>
      </li>

      <li>
        <a th:href="@{/client/budget}">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#FFFFFF"><path d="M444-200h70v-50q50-9 86-39t36-89q0-42-24-77t-96-61q-60-20-83-35t-23-41q0-26 18.5-41t53.5-15q32 0 50 15.5t26 38.5l64-26q-11-35-40.5-61T516-710v-50h-70v50q-50 11-78 44t-28 74q0 47 27.5 76t86.5 50q63 23 87.5 41t24.5 47q0 33-23.5 48.5T486-314q-33 0-58.5-20.5T390-396l-66 26q14 48 43.5 77.5T444-252v52Zm36 120q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/></svg>
          <span>Budget</span>
        </a>
      </li>

      <li class="active">
        <a th:href="@{/client/guests}">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#FFFFFF"><path d="M40-160v-112q0-34 17.5-62.5T104-378q62-31 126-46.5T360-440q66 0 130 15.5T616-378q29 15 46.5 43.5T680-272v112H40Zm720 0v-120q0-44-24.5-84.5T666-434q51 6 96 20.5t84 35.5q36 20 55 44.5t19 53.5v120H760ZM360-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47Zm400-160q0 66-47 113t-113 47q-11 0-28-2.5t-28-5.5q27-32 41.5-71t14.5-81q0-42-14.5-81T544-792q14-5 28-6.5t28-1.5q66 0 113 47t47 113ZM120-240h480v-32q0-11-5.5-20T580-306q-54-27-109-40.5T360-360q-56 0-111 13.5T140-306q-9 5-14.5 14t-5.5 20v32Zm240-320q33 0 56.5-23.5T440-640q0-33-23.5-56.5T360-720q-33 0-56.5 23.5T280-640q0 33 23.5 56.5T360-560Zm0 320Zm0-400Z"/></svg>
          <span>Guests</span>
        </a>
      </li>

      <li>
        <a th:href="@{/client/timeline}">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#FFFFFF"><path d="m612-292 56-56-148-148v-184h-80v216l172 172ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 320q133 0 226.5-93.5T800-480q0-133-93.5-226.5T480-800q-133 0-226.5 93.5T160-480q0 133 93.5 226.5T480-160Z"/></svg>
          <span>Timeline</span>
        </a>
      </li>

      <li>
        <a th:href="@{/client/contacts}">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#FFFFFF"><path d="M798-120q-125 0-247-54.5T329-329Q229-429 174.5-551T120-798q0-18 12-30t30-12h162q14 0 25 9.5t13 22.5l26 140q2 16-1 27t-11 19l-97 98q20 37 47.5 71.5T387-386q31 31 65 57.5t72 48.5l94-94q9-9 23.5-13.5T670-390l138 28q14 4 23 14.5t9 23.5v162q0 18-12 30t-30 12ZM241-600l66-66-17-94h-89q5 41 14 81t26 79Zm358 358q39 17 79.5 27t81.5 13v-88l-94-19-67 67ZM241-600Zm358 358Z"/></svg>
          <span>Contacts</span>
        </a>
      </li>

      <li>
        <button onclick=toggleSubMenu(this) class="dropdown-btn">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#FFFFFF"><path d="M475-160q4 0 8-2t6-4l328-328q12-12 17.5-27t5.5-30q0-16-5.5-30.5T817-607L647-777q-11-12-25.5-17.5T591-800q-15 0-30 5.5T534-777l-11 11 74 75q15 14 22 32t7 38q0 42-28.5 70.5T527-522q-20 0-38.5-7T456-550l-75-74-175 175q-3 3-4.5 6.5T200-435q0 8 6 14.5t14 6.5q4 0 8-2t6-4l136-136 56 56-135 136q-3 3-4.5 6.5T285-350q0 8 6 14t14 6q4 0 8-2t6-4l136-135 56 56-135 136q-3 2-4.5 6t-1.5 8q0 8 6 14t14 6q4 0 7.5-1.5t6.5-4.5l136-135 56 56-136 136q-3 3-4.5 6.5T454-180q0 8 6.5 14t14.5 6Zm-1 80q-37 0-65.5-24.5T375-166q-34-5-57-28t-28-57q-34-5-56.5-28.5T206-336q-38-5-62-33t-24-66q0-20 7.5-38.5T149-506l232-231 131 131q2 3 6 4.5t8 1.5q9 0 15-5.5t6-14.5q0-4-1.5-8t-4.5-6L398-777q-11-12-25.5-17.5T342-800q-15 0-30 5.5T285-777L144-635q-9 9-15 21t-8 24q-2 12 0 24.5t8 23.5l-58 58q-17-23-25-50.5T40-590q2-28 14-54.5T87-692l141-141q24-23 53.5-35t60.5-12q31 0 60.5 12t52.5 35l11 11 11-11q24-23 53.5-35t60.5-12q31 0 60.5 12t52.5 35l169 169q23 23 35 53t12 61q0 31-12 60.5T873-437L545-110q-14 14-32.5 22T474-80Zm-99-560Z"/></svg>
          <span>Services</span>
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M480-344 240-584l56-56 184 184 184-184 56 56-240 240Z"/></svg>
        </button>
        <ul class="sub-menu">
          <div>
            <li><a href="#">Wedding Agency</a></li>
            <li><a href="#">Restaurant</a></li>
            <li><a href="#">Musician</a></li>
            <li><a href="#">Photographer</a></li>
            <li><a href="#">Videographer</a></li>
          </div>
        </ul>
      </li>

      <li>
        <a th:href="@{/client/find-services}">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#FFFFFF"><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/></svg>
          <span>Find Services</span>
        </a>
      </li>
      <div class="spacer"></div>
      <li>
        <a th:href="@{/client/profile}">
          <img class="img-icon" src="../../static/img/profile/bride.png" alt="bride">

          <span>Profile</span>
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#FFFFFF"><path d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Zm70-80h79l14-106q31-8 57.5-23.5T639-327l99 41 39-68-86-65q5-14 7-29.5t2-31.5q0-16-2-31.5t-7-29.5l86-65-39-68-99 42q-22-23-48.5-38.5T533-694l-13-106h-79l-14 106q-31 8-57.5 23.5T321-633l-99-41-39 68 86 64q-5 15-7 30t-2 32q0 16 2 31t7 30l-86 65 39 68 99-42q22 23 48.5 38.5T427-266l13 106Zm42-180q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Zm-2-140Z"/></svg>


        </a>
      </li>
    </ul>
  </nav>



  <main>
    <div  class="lace-position-nav">
      <img src="/svg/lace/lace-vertical-left.svg" alt="Left Lace" draggable="false">
    </div>

    <div  class="second-lace">
      <img src="/svg/lace/lace-vertical-left.svg" alt="Left Lace" draggable="false">
    </div>

    <div class="lace-position-nav right">
      <img src="/svg/lace/lace-vertical-right.svg" alt="Right Lace" draggable="false">
    </div>

    <div class="second-lace right">
      <img src="/svg/lace/lace-vertical-right.svg" alt="Right Lace" draggable="false">
    </div>

    <div class="container-content">
      <h2>Guest List</h2>
      <button type="button" onclick=showAlphabeticallyForm()>Alphabetic order</button>
      <button type="button" onclick=showTableNumberForm()>Table number order</button>


      <table id="guest-wedding-table">
          <thead>
          <tr>
            <th>Name</th>
            <th>Table</th>
            <th>Menu</th>
            <th>Actions</th>
          </tr>
          </thead>
          <tbody>

          <div class="hidden" id="alphabeticallyForm">
            <h3>Guest List (Sorted Alphabetically)</h3>
            <ul>
              <li th:each="guestWedding : ${sortedGuests}">
                <span th:text="${guestWedding.nickname} + ' ' + ${guestWedding.lastNameNick}"></span>
<!--                <span th:text="'Table: ' + ${guestWedding.tableNumber}"></span>-->
              </li>
            </ul>
          </div>

          <div class="hidden" id="tableNumberForm">
            <h3>Guest List by Table</h3>
            <div th:each="group : ${groupedByTable}">
              <h4 th:text="'Table Number: ' + ${group.key}"></h4>
              <ul>
                <li th:each="guestWedding : ${group.value}">
                  <span th:text="${guestWedding.nickname} + ' ' + ${guestWedding.lastNameNick}"></span>
                </li>
              </ul>
            </div>
          </div>



          <th:block th:each="guestWedding : ${guestWeddings}">
            <tr>
              <td th:text="${guestWedding.nickname + ' ' + guestWedding.lastNameNick}"></td>

              <td th:text="${guestWedding.tableNumber}"></td>
              <td th:text="${guestWedding.menuChoice}"></td>

              <td>
                <form th:action="@{/client/guests/edit}" method="get">
                  <input type="hidden" name="guestWeddingId" th:value="${guestWedding.id}" />
                  <button type="submit" class="btn btn-edit">Edit</button>
                </form>

                <form th:action="@{/client/guests/delete}" method="post"
                      onsubmit="return confirm('Are you sure you want to delete this guest?');">
                  <input type="hidden" name="guestWeddingId" th:value="${guestWedding.id}" />
                  <button type="submit" class="btn btn-edit">Delete</button>
                </form>
              </td>
            </tr>
          </th:block>

          </tbody>
        </table>
    </div>





    <button type="button" onclick=showForm()>Add Guest</button>


      <form th:action="@{/client/guests}" method="post" id="guestForm" class="hidden">

        <div class="form-group">
          <label for="firstName">First Name:</label>
          <input type="text" id="firstName" name="firstName" required/>
        </div>
        <div class="form-group">
          <label for="lastName">Last Name:</label>
          <input type="text" id="lastName" name="lastName" required/>
        </div>
        <div class="form-group">
          <label for="email">Email:</label>
          <input type="email" id="email" name="email" required/>
        </div>
        <div class="form-group">
          <label for="gender">Gender:</label>
          <input type="text" id="gender" name="gender"/>
        </div>



        <div class="form-group">
          <label for="familyRole">Family Role</label>
          <select id="familyRole" name="familyRole">
            <option th:each="role : *{familyRole}" th:value="*{role}" th:text="*{role}"></option>
          </select>
        </div>

        <div class="form-group">
          <label for="familySide">Family Side:</label>
          <select id="familySide" name="familySide">
            <option th:each="side : *{familySide}" th:value="*{side}" th:text="*{side}"></option>
          </select>
        </div>

        <div class="form-group">
          <label for="rsvpStatus">RSVP Status:</label>
          <select id="rsvpStatus" name="rsvpStatus">
            <option th:each="status : *{rsvpStatus}" th:value="*{status}" th:text="*{status}"></option>
          </select>
        </div>

        <div class="form-group">
          <label for="tableNumber">Table Number</label>
          <input type="number" id="tableNumber" name="tableNumber"/>
        </div>

        <div class="form-group">
          <label for="menuChoice">Menu Choice</label>
          <select id="menuChoice" name="menuChoice">
            <option th:each="menu : *{menuChoice}" th:value="*{menu}" th:text="*{menu}"></option>
          </select>
        </div>

        <div class="form-group">
          <label for="guestGroup">Guest Group</label>
          <input type="text" id="guestGroup" name="guestGroup"/>
        </div>

        <button onclick=hideForm() type="submit">Add Guest</button>
      </form>

  </main>


  <script src="/js/showForm.js"></script>
  <script src="/js/handleEdit.js"></script>
  <script src="../../static/js/buttons.js"></script>
  <script src="/js/buttons.js"></script>

  <script src="/js/pathAdjuster.js"></script>
</body>
</html>